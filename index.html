<!DOCTYPE html>
<html>
  <head>
  	<title>Henry Edward Lockyer's Home Page</title>
    <link rel="icon" href="/images/favicon.svg", sizes="any">
  </head>

  <body>
    <!-- Elements on page -->
    <!-- Snake -->
    <div class="parent" id="scoreEnsemble">
      <div class="child" id="scoreText">This website is Snake protected, score 50 to proceed. Score: </div>
      <div class="child" id="score">0</div>
    </div>
    <canvas id="snakeboard" width="1000" height="600"></canvas>
    <div id="infoText">(won't work on mobile, arrow keys to control, F5 to restart)</div>
    <!-- End of Snake -->
    <!-- Website (Uni autoGen) -->
    <div id="websiteEnsemble">
      <h1>Henry Edward Lockyer</h1>
      <dl>
        <dt>Full Name: </dt> <dd>Mr Henry Edward Lockyer</dd>
        <dt>Department: </dt> <dd>Dept of Mathematical Sciences</dd>
        <dt>Job Title: </dt> <dd>Integrated PhD Statistical Applied Mathematics</dd>
        <dt>Telephone: </dt> <dd>+44 1225 388388</dd>
        <dt>Fax: </dt> <dd>n/a</dd>
        <dt>Mobile: </dt> <dd>n/a</dd>
        <dt>E-mail Address: </dt> <dd><a href="mailto:hl785@bath.ac.uk">hl785@bath.ac.uk</a></dd>
        <dt>Postal Address: </dt> <dd><address>
          Mr Henry Edward Lockyer<br>
          Dept of Mathematical Sciences<br>
          University of Bath<br>
          Bath<br>
          BA2 7AY<br>
          United Kingdom<br>
        </address></dd>
      </dl>

      <p class="footer">Go to the <a href="http://www.bath.ac.uk/">University of Bath</a> Home Page.</p>
    </div>
    <!-- End of Website (Uni autoGen) -->

    <!-- Style -->
    <style>
      /* Snake functionality */
      #snakeboard {
        position: relative;
        top: 50%;
        left: 50%;
        transform: translate(-50%, 0%);
      }
      #scoreEnsemble {
        text-align: center;
        font-size: 40px;
      }
      #infoText {
        text-align: center;
        font-size: 40px;
      }
      .child {
        display: inline-block;
        vertical-align: middle;
      }
      #websiteEnsemble{
        display: none;
      }

      /* Uni autoGen */
      h1 { border-bottom: medium solid; }
      .footer { border-top: thin solid; }
    
      /* Colours */
      body { background: white; color: black; }
      :link { background: transparent; color: blue; }
      :visited { background: transparent; color: purple; }
      :link:hover, :visited:hover, :link:active, :visited:active
        { background: transparent; color: red; }
      h1 { background: transparent; color: #00eeee; border-color: #000000; }
      dt { background: transparent; color: #00eeee; }

      /* Paddings and margins */
      .footer { padding: 0.1em 0.2em; }
      dt { margin-top: 0.5em; }

      /* Fonts */
      body { font-family: Verdana, Arial, sans-serif; }
      h1 { font-weight: 100; letter-spacing: 0.5em; }
      dt { font-weight: bold; display: run-in; }
      .footer { font-size: smaller; font-style: italic; }
      /* End of Uni autoGen */
    </style>
  </body>

  <!-- JavaScript sources -->
  <script src="scripts/snake.js"> </script>
  <script src="scripts/password.js"> </script>
  <!-- JavaScript -->
  <script> 
    // Snake functionality
    const snakeboardHTML = document.getElementById("snakeboard");
    const snakeboardHTML_ctx = snakeboard.getContext("2d");
    const scoreHTML = document.getElementById("score");

    let onScoreLam = ((score) => {
      if (score >= 50) {
        // console.log('Win detected');
        snakeboardHTML.style.display = "none";
        document.getElementById("scoreEnsemble").style.display = "none";
        document.getElementById("infoText").style.display = "none";
        document.getElementById("websiteEnsemble").style.display = "initial";
        return true;
      }
      return false;
    });

    let onOverLam = (() => {
      // console.log('Game over detected');
      document.removeEventListener("keydown", game.changeDirFn.bind(game));
    });

    let game = new SnakeGame(snakeboardHTML, snakeboardHTML_ctx, scoreHTML, onScoreLam, onOverLam);
    document.addEventListener("keydown", game.changeDirFn.bind(game));
    
    // Password functionality
    let onSuccessLam = (() => {
      snakeboardHTML.style.display = "none";
      document.getElementById("scoreEnsemble").style.display = "none";
      document.getElementById("infoText").style.display = "none";
      document.getElementById("websiteEnsemble").style.display = "initial";
      game.gameOver = true;
      document.removeEventListener("keydown", manager.keyPress.bind(manager));
    });

    let manager = new PasswordManager(onSuccessLam);
    document.addEventListener("keydown", manager.keyPress.bind(manager));
  </script>
</html>