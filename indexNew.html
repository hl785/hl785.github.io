<!DOCTYPE html>
<html>
  <head>
  	<title>Henry Edward Lockyer's Home Page</title>
  </head>

  <body>
    <!-- Elements on page -->
    <div class="parent" id="scoreEnsemble">
      <div class="child" id="scoreText">This website is Snake protected, score 50 to proceed. Score: </div>
      <div class="child" id="score">0</div>
    </div>
    <canvas id="snakeboard" width="1000" height="600"></canvas>

    <!-- Location of elements -->
    <style>
      #snakeboard {
        position: relative;
        top: 50%;
        left: 50%;
        transform: translate(-50%, 0%);
      }
      #scoreEnsemble {
        text-align: center;
        font-size: 40px;
      }
      .child {
        display: inline-block;
        vertical-align: middle;
      }
    </style>
  </body>

  <!-- JavaScript source -->
  <script src="snake.js"> </script>
  <script> 
    const snakeboardHTML = document.getElementById("snakeboard");
    const snakeboardHTML_ctx = snakeboard.getContext("2d");
    const scoreHTML = document.getElementById("score");

    let onScoreLam = ((score) => {
      if (score >= 50) {
        // console.log('Win detected');
        snakeboardHTML.style.display = "none";
        document.getElementById("scoreEnsemble").style.display = "none";
        return true;
      }
      return false;
    });

    let onOverLam = (() => {
      // console.log('Game over detected');
      document.removeEventListener("keydown", game.changeDirFn.bind(game))
    });

    let game = new SnakeGame(snakeboardHTML, snakeboardHTML_ctx, scoreHTML, onScoreLam, onOverLam);
    document.addEventListener("keydown", game.changeDirFn.bind(game));
  </script>
</html>